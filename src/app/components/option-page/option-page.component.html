<div class="options-container">
  <h2>Options supplémentaires</h2>

  <div *ngIf="loading" class="loading">
    Chargement des informations...
  </div>

  <div *ngIf="error" class="error">
    Une erreur s'est produite lors du chargement des données.
  </div>

  <div *ngIf="!loading && !error">
    <div *ngIf="car" class="car-info">
      <h3>Véhicule sélectionné</h3>
      <div class="car-details">
        <img [src]="car.image" alt="Image du véhicule">
        <div class="car-text">
          <h4>{{car.name}}</h4>
          <p>{{car.miles}} miles | {{car.agency.name}}</p>
          <p>{{car.description}}</p>
        </div>
      </div>
    </div>

    <div class="options-list">
      <h3>Options disponibles</h3>
      <div *ngIf="options.length === 0">
        Aucune option disponible.
      </div>

      <div *ngFor="let option of options" class="option-item" [class.selected]="isOptionSelected(option.id)" (click)="toggleOption(option.id)">
        <div class="option-content">
          <h4>{{option.name}}</h4>
          <p class="price">{{option.price}} €</p>
        </div>
        <div class="checkbox">
          <span *ngIf="isOptionSelected(option.id)" class="check-icon">✓</span>
        </div>
      </div>

      <div *ngIf="selectedOptions.length > 0" class="total-price">
        <h4>Total des options sélectionnées</h4>
        <p>{{getTotalPrice()}} €</p>
      </div>
    </div>

    <div class="actions">
      <button class="back-button" [routerLink]="['/guarantees', carId]">Retour aux garanties</button>
      <button class="continue-button" [routerLink]="['/payment', carId]">
        Finaliser la réservation
      </button>
    </div>
  </div>
</div>
